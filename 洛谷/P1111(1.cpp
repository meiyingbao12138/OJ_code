#include<bits/stdc++.h>
using namespace std;
int fa[1000+10],n,m;
struct node
{
	int x,y,t;
}a[100000+10];//??????!
bool cmp(node fir,node sec)
{
	return fir.t<sec.t;
}//??????
int gf(int x)
{
	if(fa[x]==x) return x;
	return fa[x]=gf(fa[x]);
    //???????,?????????,??????
}
void hb(int x,int y)
{
	int fx=gf(x);//??x???
	int fy=gf(y);//??y???
	fa[fx]=fy;//?fx?fy???
}//????
bool check()
{
	int sum=0;
	for(int i=1;i<=n;i++)
	{
		if(fa[i]==i) sum++;//?????????
		if(sum==2) return 0;//????????false????????
	}
	return 1;//??1???,??true
}//??????
int main()
{
	scanf("%d%d",&n,&m);
	for(int i=1;i<=n;i++) fa[i]=i;//???
	for(int i=1;i<=m;i++) scanf("%d%d%d",&a[i].x,&a[i].y,&a[i].t);
	sort(a+1,a+m+1,cmp);//?????
	for(int i=1;i<=m;i++)
	{
		hb(a[i].x,a[i].y);//????
		if(check())//????1???
		{
			printf("%d\n",a[i].t);
			return 0;
		}
	}
	printf("-1\n");
	return 0;
}
